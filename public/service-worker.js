//定义缓存的名称和需要缓存的资源列表const cacheName = 'weatherPWA-1',    dataCacheName = 'weatherData-1',    filesToCache = [        '/',        '/js/active.js',        '/images/clear.png',        '/images/cloudy-scattered-showers.png',        '/images/cloudy.png',        '/images/cloudy_s_sunny.png',        '/images/fog.png',        '/images/ic_add_white_24px.svg',        '/images/ic_refresh_white_24px.svg',        '/images/partly-cloudy.png',        '/images/rain.png',        '/images/scattered-showers.png',        '/images/sleet.png',        '/images/snow.png',        '/images/thunderstorm.png',        '/images/wind.png',        '/styles/style.css',        'favicon.ico',        '/dist/inline.bundle.js',        '/dist/polyfills.bundle.js',        '/dist/vendor.bundle.js',        '/dist/main.bundle.js'    ];//加载service-workerself.addEventListener('install',(e) => {    //console.log('[serviceWorker]加载');    e.waitUntil(        caches.open(cacheName).then(cache => {            //console.log('缓存app');            return cache.addAll(filesToCache)        })    )});self.addEventListener('activate',(e) => {    console.log('activate');    e.waitUntil(        caches.keys().then((keylist) => {            return Promise.all(keylist.map((key) => {                if (key !== cacheName && key !== dataCacheName) {                    console.log('remove old cache!',key);                  return caches.delete(key)                }            }))        })    );    return self.clients.claim();});self.addEventListener('fetch',(e) => {    let dataUrl = 'https://query.yahooapis.com/v1/public/yql';    if (e.request.url.indexOf(dataUrl) > -1){      e.respondWith(	      caches.open(dataCacheName).then(cache => {		      return fetch(e.request).then(response => {			      cache.put(e.request.url,response.clone());			      return response		      })	      })      )    } else {	    e.respondWith(            caches.match(e.request).then((respond) => {                return respond || fetch(e.request);            })        )    }});